\section{sim.h File Reference}
\label{sim_8h}\index{sim.h@{sim.h}}
Contains functions for simulation engine. 


{\tt \#include \char`\"{}defines.h\char`\"{}}\par
\subsection*{Functions}
\begin{CompactItemize}
\item 
void {\bf sim\_\-expr\_\-changed} ({\bf expression} $\ast$expr)
\begin{CompactList}\small\item\em Adds specified expression's statement to pre-simulation statement queue.\item\end{CompactList}\item 
void {\bf sim\_\-add\_\-stmt\_\-to\_\-queue} ({\bf statement} $\ast$stmt)
\begin{CompactList}\small\item\em Adds specified statement to pre-simulation statement queue.\item\end{CompactList}\item 
void {\bf sim\_\-simulate} ()
\begin{CompactList}\small\item\em Simulates current timestep.\item\end{CompactList}\end{CompactItemize}


\subsection{Detailed Description}
Contains functions for simulation engine.



\begin{Desc}
\item[Author: ]\par
Trevor Williams ({\tt trevorw@charter.net}) \end{Desc}
\begin{Desc}
\item[Date: ]\par
6/20/2002\end{Desc}


\subsection{Function Documentation}
\index{sim.h@{sim.h}!sim_add_stmt_to_queue@{sim\_\-add\_\-stmt\_\-to\_\-queue}}
\index{sim_add_stmt_to_queue@{sim\_\-add\_\-stmt\_\-to\_\-queue}!sim.h@{sim.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void sim\_\-add\_\-stmt\_\-to\_\-queue ({\bf statement} $\ast$ {\em stmt})}\label{sim_8h_a1}


Adds specified statement to pre-simulation statement queue.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
stmt}]Pointer to statement to add to queue.\end{description}
\end{Desc}
Checks STMT\_\-HEAD bit of specified statement. If this is set to 1, adds this statement to the presimulation statement queue; otherwise, it does nothing with the statement \index{sim.h@{sim.h}!sim_expr_changed@{sim\_\-expr\_\-changed}}
\index{sim_expr_changed@{sim\_\-expr\_\-changed}!sim.h@{sim.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void sim\_\-expr\_\-changed ({\bf expression} $\ast$ {\em expr})}\label{sim_8h_a0}


Adds specified expression's statement to pre-simulation statement queue.

\begin{Desc}
\item[Parameters: ]\par
\begin{description}
\item[{\em 
expr}]Pointer to expression that contains a changed signal value.\end{description}
\end{Desc}
Traverses up expression tree pointed to by leaf node expr, setting the CHANGED bits as it reaches the root expression. When the root expression is found, the statement pointed to by the root's parent pointer is added to the pre-simulation statement queue for simulation at the end of the timestep. If, upon traversing the tree, an expression is found to already be have a CHANGED bit set, we know that the statement has already been added, so stop here and do not add the statement again. \index{sim.h@{sim.h}!sim_simulate@{sim\_\-simulate}}
\index{sim_simulate@{sim\_\-simulate}!sim.h@{sim.h}}
\subsubsection{\setlength{\rightskip}{0pt plus 5cm}void sim\_\-simulate ()}\label{sim_8h_a2}


Simulates current timestep.

This function is the heart of the simulation engine. It is called by the {\bf db\_\-do\_\-timestep}() {\rm (p.\,\pageref{db_8c_a40})} function in {\bf db.c} and moves the statements and expressions into the appropriate simulation functions. See above explanation on this procedure. 