<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>statement.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.16 -->
<h1>statement.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include "<a class="el" href="defines_8h-source.html">defines.h</a>"</code><br>
<code>#include "<a class="el" href="statement_8h-source.html">statement.h</a>"</code><br>
<code>#include "<a class="el" href="expr_8h-source.html">expr.h</a>"</code><br>
<code>#include "<a class="el" href="util_8h-source.html">util.h</a>"</code><br>
<code>#include "<a class="el" href="link_8h-source.html">link.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a0">statement_create</a> (<a class="el" href="defines_8h.html#a112">expression</a> *exp)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Creates new statement structure.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a1">statement_db_write</a> (<a class="el" href="defines_8h.html#a114">statement</a> *stmt, FILE *ofile, char *scope)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Writes specified statement to the specified output file.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="defines_8h.html#a128">bool</a>&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a2">statement_db_read</a> (char **line, <a class="el" href="defines_8h.html#a118">module</a> *curr_mod)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reads in statement line from specified string and stores statement in specified module.</em> <a href="#a2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a3">statement_connect</a> (<a class="el" href="defines_8h.html#a114">statement</a> *curr_stmt, <a class="el" href="defines_8h.html#a114">statement</a> *next_stmt)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Connects statement sequence to next statement.</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a4">statement_set_stop</a> (<a class="el" href="defines_8h.html#a114">statement</a> *stmt)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="statement_8c.html#a5">statement_dealloc</a> (<a class="el" href="defines_8h.html#a114">statement</a> *stmt)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Deallocates statement memory and associated expression tree from the heap.</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<dl compact><dt><b>
Author: </b><dd>
Trevor Williams (<a href="mailto:trevorw@charter.net">trevorw@charter.net</a>) </dl><dl compact><dt><b>
Date: </b><dd>
5/1/2002
<p>
 Statements are used to indicate flow of execution for a given always or initial block. Each statement is assigned to exactly one expression tree and it contains a pointer to the next statement if its expression tree evaluates to TRUE (non-zero value) or FALSE (zero value). To minimize memory use, a statement  uses some of the unused bits in its root expression supplemental field instead of having its own supplemental field. There are two bits in the expression supplemental value that are only used by expressions: <a class="el" href="group__expr__suppl.html#a3">SUPPL_LSB_STMT_HEAD</a> and <a class="el" href="group__expr__suppl.html#a4">SUPPL_LSB_STMT_STOP</a>.
<p>
 The STMT_HEAD bit indicates that this statement should be loaded into the pre-simulation statement queue if any of its expressions change value in the current timestep. To begin with, the first statement in the always/initial block has this bit set, all other statements have this bit cleared.
<p>
 The STMT_STOP bit is used for CDD output. If a statement has this bit set, it will not traverse its next_true or next_false paths when outputting. This is necessary when statement paths merge back to the same path. If this bit was not used, the statements output after the merge would be output twice. Consider the following Verilog code snippet:</dl><div class="fragment"><pre> intial begin
        a = 0;
        <font class="keywordflow">if</font>( a )
          b = 1;
        <font class="keywordflow">else</font>
          b = 0;
        c = a | b;
 end
</pre></div>
<p>
 In this example there are five statements. They are the following:
<p>
<ol>
<li><div class="fragment"><pre>a = 0; 
</pre></div><li><div class="fragment"><pre><font class="keywordflow">if</font>( a ) 
</pre></div><li><div class="fragment"><pre>b = 1; 
</pre></div><li><div class="fragment"><pre>b = 0; 
</pre></div><li><div class="fragment"><pre>c = a | b; 
</pre></div></ol>

<p>
 Notice that the if statement has two paths. If a is TRUE, statement 3 is executed; otherwise, statement 4 is executed. Both statements 3 and 4 then merge to execute statement 5. If the entire statement tree were printed without a STOP bit, you can see that statement 5 would be output twice; once for the TRUE branch and once for the FALSE branch.
<p>
 To eliminate this redundancy, the STMT_STOP bit is set on statement 4. The last statement of a TRUE path before merging always gets its STMT_STOP bit set. The FALSE path should never get the STMT_STOP bit set. Additionally, once a statement gets its STMT_STOP bit set by the parser, this value must be maintained (never cleared).<dl compact><dt><b>
Cyclic Statement Trees</b><dd>
 Many times a statement tree will "loopback" on itself. These statement trees are considered to be cyclic in nature and, as such, must have leaf statements of the statement tree tied to the first statement of the tree. The following Verilog constructs have cyclic behavior: <code>always</code>, <code>forever</code>, <code>for</code>, <code>repeat</code>, and <code>while</code>.</dl><dl compact><dt><b>
Traversing Statement Tree</b><dd>
 Starting at the head statement, the value of the head statement is determined to be TRUE or FALSE. If the value is TRUE (non-zero), the next_true path is taken. If the value is FALSE (zero), the next_false path is taken. For statements that express an assignment (or other statements that do not branch), both the next_true and next_false paths point to the same statement. For statements that express a wait-for-event (ex. <code>wait</code>, <code>@</code>, etc.), the next_true pointer will point to the next statement in the tree; however, the next_false pointer will point to NULL. This NULL assignment indicates to the statement simulation engine that this statement will receive the STMT_HEAD bit and the current statement tree is finished for this timestep.</dl><hr><h2>Function Documentation</h2>
<a name="a3" doxytag="statement.c::statement_connect"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void statement_connect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>curr_stmt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>next_stmt</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connects statement sequence to next statement.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>curr_stmt</em>&nbsp;</td><td>
Pointer to statement sequence to traverse. </td></tr>
<tr><td valign=top><em>next_stmt</em>&nbsp;</td><td>
Pointer to statement to connect ends to.</td></tr>
</table>
</dl>Recursively traverses the specified stmt sequence. When it reaches a statement  that has either next_true or next_false set to NULL, sets next_true and/or  next_false of that statement to point to the next_stmt statement.     </td>
  </tr>
</table>
<a name="a0" doxytag="statement.c::statement_create"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="defines_8h.html#a114">statement</a>* statement_create </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a112">expression</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>exp</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates new statement structure.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>exp</em>&nbsp;</td><td>
Pointer to root expression of expression tree for this statement.</td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
Returns pointer to the newly created statement.</dl>Creates a new statement structure from heap memory and initializes it with the specified parameter information.     </td>
  </tr>
</table>
<a name="a2" doxytag="statement.c::statement_db_read"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="defines_8h.html#a128">bool</a> statement_db_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>line</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a118">module</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>curr_mod</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads in statement line from specified string and stores statement in specified module.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>line</em>&nbsp;</td><td>
Pointer to current line of file being read. </td></tr>
<tr><td valign=top><em>curr_mod</em>&nbsp;</td><td>
Pointer to current module.</td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
Returns TRUE if the line is read without error; otherwise, returns FALSE.</dl>Reads in the contents of the statement from the specified line, creates a statement structure to hold the contents.     </td>
  </tr>
</table>
<a name="a1" doxytag="statement.c::statement_db_write"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void statement_db_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>stmt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>FILE *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ofile</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>scope</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Writes specified statement to the specified output file.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>stmt</em>&nbsp;</td><td>
Pointer to statement to write out value. </td></tr>
<tr><td valign=top><em>ofile</em>&nbsp;</td><td>
Pointer to output file to write statement line to. </td></tr>
<tr><td valign=top><em>scope</em>&nbsp;</td><td>
Scope of parent module which contains the specified statement.</td></tr>
</table>
</dl>Recursively writes the contents of the specified statement tree (and its associated expression trees to the specified output stream.     </td>
  </tr>
</table>
<a name="a5" doxytag="statement.c::statement_dealloc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void statement_dealloc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>stmt</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deallocates statement memory and associated expression tree from the heap.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>stmt</em>&nbsp;</td><td>
Pointer to statement to deallocate.</td></tr>
</table>
</dl>Deallocates specified statement from heap memory. First remove expression tree of this statement. Second, remove all statements following this statement. Finally, remove the specified statement itself. Since statements can be circular in nature, we will not remove a statement that has its expression tree already deallocated. This will prevent this function from getting into an infinite loop (or stack overflow since this function is recursive).     </td>
  </tr>
</table>
<a name="a4" doxytag="statement.c::statement_set_stop"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void statement_set_stop </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a114">statement</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>stmt</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>stmt</em>&nbsp;</td><td>
Pointer to statement to traverse and set stop bits.</td></tr>
</table>
</dl>Recursively traverses specified statement, setting STMT_STOP bits on leaf nodes. This function is called for the last statement in a sequence. It is called before the statement_connect for the entire statement sequence.     </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Mon Jun 24 22:38:06 2002 for Covered by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.16 </small></address>
</body>
</html>
