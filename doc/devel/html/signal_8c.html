<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>signal.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.16 -->
<h1>signal.c File Reference</h1><code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include "<a class="el" href="defines_8h-source.html">defines.h</a>"</code><br>
<code>#include "<a class="el" href="signal_8h-source.html">signal.h</a>"</code><br>
<code>#include "<a class="el" href="expr_8h-source.html">expr.h</a>"</code><br>
<code>#include "<a class="el" href="link_8h-source.html">link.h</a>"</code><br>
<code>#include "<a class="el" href="vector_8h-source.html">vector.h</a>"</code><br>
<code>#include "<a class="el" href="module_8h-source.html">module.h</a>"</code><br>
<code>#include "<a class="el" href="util_8h-source.html">util.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a0">signal_init</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig, char *name, <a class="el" href="defines_8h.html#a120">vector</a> *value)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initializes specified signal with specified values.</em> <a href="#a0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a1">signal_create</a> (char *name, int width, int lsb, int is_static)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Creates a new signal based on the information passed to this function.</em> <a href="#a1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a2">signal_merge</a> (<a class="el" href="defines_8h.html#a123">signal</a> *base, <a class="el" href="defines_8h.html#a123">signal</a> *in)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Merges two signals, placing result into base signal.</em> <a href="#a2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a3">signal_db_write</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig, FILE *<a class="el" href="vcd__lexer_8c.html#a106">file</a>, char *modname)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Outputs this signal information to specified file.</em> <a href="#a3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="defines_8h.html#a139">bool</a>&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a4">signal_db_read</a> (char **line, <a class="el" href="defines_8h.html#a129">module</a> *curr_mod)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reads signal information from specified file.</em> <a href="#a4"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="defines_8h.html#a139">bool</a>&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a5">signal_set_value</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig, <a class="el" href="defines_8h.html#a118">nibble</a> *value, int num_bits, int from_lsb, int to_lsb)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets value of signal to specified value.</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a6">signal_add_expression</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig, <a class="el" href="defines_8h.html#a122">expression</a> *expr)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Adds an expression to the signal list.</em> <a href="#a6"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a7">signal_display</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Displays signal contents to standard output.</em> <a href="#a7"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="signal_8c.html#a8">signal_dealloc</a> (<a class="el" href="defines_8h.html#a123">signal</a> *sig)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Deallocates the memory used for this signal.</em> <a href="#a8"></a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<dl compact><dt><b>
Author: </b><dd>
Trevor Williams (<a href="mailto:trevorw@charter.net">trevorw@charter.net</a>) </dl><dl compact><dt><b>
Date: </b><dd>
12/1/2001</dl><hr><h2>Function Documentation</h2>
<a name="a6" doxytag="signal.c::signal_add_expression"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_add_expression </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>sig</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a122">expression</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>expr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds an expression to the signal list.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Pointer to signal to add expression to. </td></tr>
<tr><td valign=top><em>expr</em>&nbsp;</td><td>
Expression to add to list.</td></tr>
</table>
</dl>Adds the specified expression to the end of this signal's expression list.     </td>
  </tr>
</table>
<a name="a1" doxytag="signal.c::signal_create"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="defines_8h.html#a123">signal</a>* signal_create </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>width</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>lsb</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>is_static</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a new signal based on the information passed to this function.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>name</em>&nbsp;</td><td>
Full hierarchical name of this signal. </td></tr>
<tr><td valign=top><em>width</em>&nbsp;</td><td>
Bit width of this signal. </td></tr>
<tr><td valign=top><em>lsb</em>&nbsp;</td><td>
Bit position of least significant bit. </td></tr>
<tr><td valign=top><em>is_static</em>&nbsp;</td><td>
Specifies if this signal is a static value.</td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
Pointer to newly created signal.</dl>This function should be called by the Verilog parser or the database reading function. It initializes all of the necessary values for a signal and returns a pointer to this newly created signal.     </td>
  </tr>
</table>
<a name="a4" doxytag="signal.c::signal_db_read"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="defines_8h.html#a139">bool</a> signal_db_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>line</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a129">module</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>curr_mod</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads signal information from specified file.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>line</em>&nbsp;</td><td>
Pointer to current line from database file to parse. </td></tr>
<tr><td valign=top><em>curr_mod</em>&nbsp;</td><td>
Pointer to current module instantiating this signal.</td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
Returns TRUE if signal information read successfully; otherwise, returns FALSE.</dl>
<p>
<dl compact><dt><b>
<a class="el" href="bug.html#_bug000002">Bug: </a></b><dd>
A signal will only look in the current module for a matching expression. In the case of a hierarchical reference, it is possible that an expression outside the current module is referencing this signal. We need to check for this case (hierarchical expression) and find the expression elsewhere.</dl>
<p>
Creates a new signal structure, parses current file line for signal information and stores it to the specified signal. If there are any problems in reading in the current line, returns FALSE; otherwise, returns TRUE.     </td>
  </tr>
</table>
<a name="a3" doxytag="signal.c::signal_db_write"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_db_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>sig</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>FILE *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>file</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>modname</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Outputs this signal information to specified file.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Signal to write to file. </td></tr>
<tr><td valign=top><em>file</em>&nbsp;</td><td>
Name of file to display signal contents to. </td></tr>
<tr><td valign=top><em>modname</em>&nbsp;</td><td>
Name of module that this signal belongs to.</td></tr>
</table>
</dl>Prints the signal information for the specified signal to the specified file. This file will be the database coverage file for this design.     </td>
  </tr>
</table>
<a name="a8" doxytag="signal.c::signal_dealloc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_dealloc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>sig</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deallocates the memory used for this signal.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Pointer to signal to deallocate.</td></tr>
</table>
</dl>Deallocates all malloc'ed memory back to the heap for the specified signal.     </td>
  </tr>
</table>
<a name="a7" doxytag="signal.c::signal_display"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_display </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>sig</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Displays signal contents to standard output.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Pointer to signal to display to standard output.</td></tr>
</table>
</dl>Displays signal's name, width, lsb and value vector to the standard output.     </td>
  </tr>
</table>
<a name="a0" doxytag="signal.c::signal_init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>sig</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a120">vector</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>value</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes specified signal with specified values.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Pointer to signal to initialize. </td></tr>
<tr><td valign=top><em>name</em>&nbsp;</td><td>
Pointer to signal name string. </td></tr>
<tr><td valign=top><em>value</em>&nbsp;</td><td>
Pointer to signal value.</td></tr>
</table>
</dl>Initializes the specified signal with the values of name and value. This function is called by the signal_create routine and is also useful for creating temporary signals (reduces the need for dynamic memory allocation). for performance enhancing purposes.     </td>
  </tr>
</table>
<a name="a2" doxytag="signal.c::signal_merge"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void signal_merge </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>base</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>in</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Merges two signals, placing result into base signal.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>base</em>&nbsp;</td><td>
Signal to store result of merge into. </td></tr>
<tr><td valign=top><em>in</em>&nbsp;</td><td>
Signal to be merged into base signal.</td></tr>
</table>
</dl>Performs merge of the base and in signals, placing the resulting merged signal into the base signal. If the signals are found to be unalike (names are different), an error message is displayed to the user. If both signals are the same, perform the merge on the signal's vectors.     </td>
  </tr>
</table>
<a name="a5" doxytag="signal.c::signal_set_value"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="defines_8h.html#a139">bool</a> signal_set_value </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="defines_8h.html#a123">signal</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>sig</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="defines_8h.html#a118">nibble</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>value</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>num_bits</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>from_lsb</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>to_lsb</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets value of signal to specified value.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>sig</em>&nbsp;</td><td>
Pointer to signal to set value to. </td></tr>
<tr><td valign=top><em>value</em>&nbsp;</td><td>
Value to set signal value to. </td></tr>
<tr><td valign=top><em>num_bits</em>&nbsp;</td><td>
Number of bits wide that value is. </td></tr>
<tr><td valign=top><em>from_lsb</em>&nbsp;</td><td>
Least significant bit of assign value. </td></tr>
<tr><td valign=top><em>to_lsb</em>&nbsp;</td><td>
Least significant bit of signal being assigned. </td></tr>
</table>
</dl><dl compact><dt><b>
Returns: </b><dd>
Returns TRUE if value assignment is successful; otherwise, returns FALSE.</dl>This function is called by the VCD reading function when the matching signal is found. If the signal has never been set to a value before (value is NULL), copy the contents of the value verbatim. If the signal value has been set previously, compare the old value to the new value bit for bit, setting the toggle bits accordingly. After this is achieved, copy the new value to the signal value. If the specified value width, does not match this signal's width, we have an internal error (VCD file does not match the design read in), so we return FALSE. Otherwise, return with a value of TRUE.     </td>
  </tr>
</table>
<hr><address align="right"><small>Generated on Thu Jul 4 23:10:39 2002 for Covered by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.16 </small></address>
</body>
</html>
