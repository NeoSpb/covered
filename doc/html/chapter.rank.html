<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 12. The rank Command</title><meta name="generator" content="DocBook XSL Stylesheets V1.74.0"><link rel="home" href="index.html" title="Covered"><link rel="up" href="part.command.line.usage.html" title="Part III. Command-line Usage"><link rel="prev" href="chapter.report.html" title="Chapter 11. The report Command"><link rel="next" href="chapter.reading.html" title="Chapter 13. Reading the Report"></head><body bgcolor="#dfeef8" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 12. The rank Command</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter.report.html"><img src="img/prev.gif" alt="Prev"></a> </td><th width="60%" align="center">Part III. Command-line Usage</th><td width="20%" align="right"> <a accesskey="n" href="chapter.reading.html"><img src="img/next.gif" alt="Next"></a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="chapter.rank"></a>Chapter 12. The rank Command</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="chapter.rank.html#section.rank.options">12.1. Options</a></span></dt><dt><span class="sect1"><a href="chapter.rank.html#section.rank.inputting">12.2. Methods for specifying CDDs to rank</a></span></dt><dt><span class="sect1"><a href="chapter.rank.html#section.rank.weighting">12.3. Specifying metric weights</a></span></dt><dt><span class="sect1"><a href="chapter.rank.html#section.rank.algorithm">12.4. Description of ranking algorithm</a></span></dt></dl></div><p>
  TBD
  </p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section.rank.options"></a>12.1. Options</h2></div></div></div><p>
      </p><div class="table"><a name="id2604289"></a><p class="title"><b>Table 12.1. Options to rank Command</b></p><div class="table-contents"><table summary="Options to rank Command" border="1"><colgroup><col><col></colgroup><thead><tr><th>
              Option
              </th><th>
              Description
              </th></tr></thead><tbody><tr><td>
              -depth <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies the minimum number of CDD files to hit each coverage point. The value of 
              <span class="emphasis"><em>number</em></span> should be a value of 1 or more.  Default is 1.
              </td></tr><tr><td>
              -d <span class="emphasis"><em>directory</em></span>
              </td><td>
              Directory to search for CDD files to include.  This option is used in conjunction with the -ext option 
              which specifies the file extension to use for determining which files in the directory are CDD files.
              </td></tr><tr><td>
              -ext <span class="emphasis"><em>extension</em></span>
              </td><td>
              Used in conjunction with the -d option.  If no -ext options are specified on the command-line, the 
              default value of '.cdd' is used.  Note that a period (.) should be specified.
              </td></tr><tr><td>
              -f <span class="emphasis"><em>filename</em></span>
              </td><td>
              Name of file containing additional arguments to parse.
              </td></tr><tr><td>
              -h
              </td><td>
              Displays help information for the rank command.
              </td></tr><tr><td>
              -names-only
              </td><td>
              If specified, outputs only the needed CDD filenames that need to be run in the order they need to be run. 
              If this option is not set, a report-style output is provided with additional information.
              </td></tr><tr><td>
              -o <span class="emphasis"><em>filename</em></span>
              </td><td>
              Name of file to output ranking information to.  Default is stdout.
              </td></tr><tr><td>
              -require <span class="emphasis"><em>filename</em></span>
              </td><td>
              Name of file containing list of CDD files which are required to be in the list of ranked CDDs to be run.
              </td></tr><tr><td>
              -weight-assert <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for assertion coverage used to rank non-unique coverage points.
              </td></tr><tr><td>
              -weight-comb <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for combinational logic coverage used to rank non-unique coverage points.
              </td></tr><tr><td>
              -weight-fsm <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for FSM state/state transition coverage used to rank non-unique coverage 
              points.
              </td></tr><tr><td>
              -weight-line <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for line coverage used to rank non-unique coverage points.
              </td></tr><tr><td>
              -weight-memory <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for memory coverage used to rank non-unique coverage points.
              </td></tr><tr><td>
              -weight-toggle <span class="emphasis"><em>number</em></span>
              </td><td>
              Specifies a relative weighting for toggle coverage used to rank non-unique coverage points.
              </td></tr></tbody></table></div></div><p><br class="table-break">
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section.rank.inputting"></a>12.2. Methods for specifying CDDs to rank</h2></div></div></div><p>
    The rank command provides several mechanisms for specifying CDD files to rank.  Feel free to use any combination
    of methods for providing this information to Covered as it makes sense to do in your environment.  The following is 
    the list of input methods:
    </p><p>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
          Specify each CDD file after the rank command options have been specified.  This method is best when there are
          a relatively small number of CDD files to rank as the length of the command-line in a shell is typically
          limited to a certain number of characters.
          </p></li><li><p>
          Create a file containing the list of CDD files to rank and pass this file to the rank command's 
          <span class="bold"><strong>-f</strong></span> option.  Using this method, one can selectively specify a large number 
          of CDD files.
          </p></li><li><p>
          Use shell commands to create a list of CDD files and pass them to Covered's standard input via command-line 
          piping and the <span class="bold"><strong>-f -</strong></span> command-line option (the - means use standard input).
          The following line is an example of this usage:
          </p><p>
            </p><pre class="programlisting">
  ls foo*.cdd | covered rank -f -          
            </pre><p>
          </p></li><li><p>
          Use the <span class="bold"><strong>-d <span class="emphasis"><em>directory</em></span></strong></span> and 
          <span class="bold"><strong>-ext <span class="emphasis"><em>extension</em></span></strong></span> options to tell
          Covered to retrieve all files found in the directory specified by <span class="emphasis"><em>directory</em></span> that contain
          the file extension of <span class="emphasis"><em>extension</em></span> (if the <span class="bold"><strong>-ext</strong></span> option
          is not specified, the default extension of ".cdd" is used).  The following is an example of this usage: 
          </p><p>
            </p><pre class="programlisting">
  covered rank -d /home/bubba/cdd_dir -ext .mycdd          
            </pre><p>
          </p></li></ul></div><p>
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section.rank.weighting"></a>12.3. Specifying metric weights</h2></div></div></div><p>
    The rank command has several options that allow the user to weight any and all of the coverage metrics that Covered 
    supplies.  Weights are used to ascribe the importance of its metric in ranking the value of a CDD file.
    </p><p>
    Weight values are non-negative numbers whose values are relative to each other.  A value of 0 effectively disables 
    the associated weight from consideration in ranking.  All other values are considered relative to each other.  In
    other words, if the line weight is set to a value of 5 while the toggle weight is set to 1, line coverage is 
    considered 5 times more important than toggle coverage in ranking.
    </p><p>
    By default, each metric is given an equal weight of 1.  Adjust each of the metrics as necessary to potentially
    modify which CDD files are chosen and what order those CDD files are given in the ranked list of diagnostics to run.
    </p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section.rank.algorithm"></a>12.4. Description of ranking algorithm</h2></div></div></div><p>
    This section describes the overall algorithm that is used to rank the specified CDD files. The algorithm is being 
    presented in this document for the purposes of providing an explanation for how diagnostics are selected for
    ranking and how they are ranked. Knowing this information is not necessary for using the rank command or 
    understanding its results.
    </p><p>
    The algorithm makes use of three different types of structures.  The first structure is a bit-compressed structure
    where each bit corresponds to one coverage point in the associated CDD file. The purpose of this structure is to 
    store a large amount of information as concisely and immediately available as possible. In addition to coverage
    point information, each structure also contains the following information:
    </p><p>
      </p><div class="itemizedlist"><ul type="disc"><li><p>
          Name of CDD file that the structure is associated with (for reporting purposes only).
          </p></li><li><p>
          The number of timesteps that occurred during the CDD simulation. This is used for calculating the average 
          number of coverage points hit during a single clock period -- used for ranking selection.
          </p></li><li><p>
          The total number of coverage points hit by the CDD. This is used for calculating the average number of 
          coverage points hit during a single clock period -- used for ranking selection.
          </p></li><li><p>
          The total number of coverage points that were hit by this CDD that were not hit by any other CDD listed in
          the rank command-line. This information is used to figure out which CDDs are absolutely necessary to be
          included in the ranked list.
          </p></li><li><p>
          The current score associated with the CDD file. This value is updated for each selection iteration.
          </p></li></ul></div><p>
    </p><p>
    Each of these structures are maintained in an array that is iterated on during the ranking process.
    </p><p>
    The second structure is an array of 16-bit values where each value corresponds to a single coverage point. Its 
    value is a sum of the number of unranked CDD files that have hit that coverage point. Each value is decremented
    by one when a CDD file is moved from the unranked list to the ranked list and that CDD file hits the given
    coverage point. If a coverage point value is a value of 1 and a CDD file has its corresponding coverage bit set,
    we know that the CDD is the only one that hits the coverage point.
    </p><p>
    The third structure is similar to the second and works similarly, except that it stores the number of CDD files in
    the ranked list that hit a particular coverage point.
    </p><p>
    The specified CDD files are ranked in a series of steps, some of which are reiterated for each CDD that is
    selected to be ranked. Here is the basic algorithm (in pseudo-code):
    </p><p>
      </p><pre class="programlisting">
      
  calculate the size of the compressed coverage point structure
  
  foreach CDD in CDD_list {
    convert CDD to compressed coverage point structure
  }
  
  foreach CDD in CDD_list {
    if this CDD contains uniquely hit coverage points {
      move the CDD file into the ranked list
    }
  }
  
  foreach CDD in unranked list {
    foreach CDD in unranked list {
      calculate score (((total_num_cov_points_hit / num_timesteps) * 100) * metric_weight_value)
      if any unranked elements are less than the -depth option value and are hit by this CDD {
        set unique_found to true
      }
      if our score &gt; highest score and a "unique" coverage point was found {
        set highest_score to our score
      }
    }
    move the CDD file indexed by highest_score from the unranked list to the ranked list
  }
  
  resort ranked list from most unique to least unique (if there is a tie, select the CDD that hit the most coverage
    points in the least amount of time)
      </pre><p>
    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter.report.html"><img src="img/prev.gif" alt="Prev"></a> </td><td width="20%" align="center"><a accesskey="u" href="part.command.line.usage.html"><img src="img/up.gif" alt="Up"></a></td><td width="40%" align="right"> <a accesskey="n" href="chapter.reading.html"><img src="img/next.gif" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 11. The report Command </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="img/home.gif" alt="Home"></a></td><td width="40%" align="right" valign="top"> Chapter 13. Reading the Report</td></tr></table></div></body></html>
